<h1 align="center" id="部署博客从零开始">部署博客从零开始</h1>

**概要：**记录主播从购买到部署个人博客的整个过程。



## 引言

主播买的服务器配置为`2核4G 40G 带宽3Mbps`，主要是用来放两个项目，一个博客（放/blog下），一个css练习网站（放/lab下）。



## 买服务器
厂家太多了，这里以火山引擎为例，别问为什么，问就是便宜。
来解释下服务器的各种配置，以2核4G 40G 带宽3Mbps为例：

- CPU核数（4核）：
  
  核心越多，能同时处理的任务就越多，这里的“核”一般是虚拟核心，不等同于物理核心，性能略低于真实物理机。4核的话，部署个人轻型应用完全够了。
  
- 内存（4G）：
  
  内存影响程序运行的流畅度、能同时运行的程序数量等。比如你跑网站、数据库、服务等，都需要内存空间。单位是千兆字节（GB）。
  
- 系统盘或云盘容量（40G）：
  
  用于存放操作系统、程序、日志、数据库，分为系统盘和数据盘，具体以购买页面为准，我这里表示的是系统盘为40G。磁盘通常是云盘（如高效云盘、SSD云盘等），性能和价格不同。
  
- 带宽（3Mbps）：
  
  带宽影响你的服务器与外网之间的传输速度。如果你的网站需要承载大量访问或者有视频、文件下载等功能，带宽就非常重要，单位是兆比特每秒（Mbps）相当于 0.375MB/s（注意：Mbps是“位”，MB是“字节”，1字节=8位）。   
  
  

之后会让你配置镜像，镜像就是你要安装的系统，比如Ubuntu、CentOS、Windows等。大致分为公共镜像、自定义镜像、共享镜像：
- 公共镜像：云服务提供商（如阿里云、腾讯云、AWS、Azure、Google Cloud等）官方提供，或由认证的第三方ISV（独立软件供应商）通过云市场提供的标准操作系统镜像。
- 自定义镜像：自己基于一台已经配置好的云服务器实例创建的镜像。你可以先从一个公共镜像启动一台服务器，然后在上面安装你需要的软件（比如Nginx、MySQL、PHP、你的博客程序、各种依赖库），进行个性化配置，然后将这台服务器的当前状态制作成一个镜像。
- 共享镜像：其他云用户（可以是你的同事、朋友、或者其他组织）创建的自定义镜像，然后通过云平台的共享功能将其共享给你使用。



## 计划表
| 阶段 | 内容                              | 建议时间 |
| ---- | --------------------------------- | -------- |
| 1    | 手动部署两个项目 + nginx 配置     | 第1天    |
| 2    | 绑定域名 + HTTPS                  | 第1\~2天 |
| 3    | 配置 GitHub Actions 实现自动部署  | 第3天    |
| 4    | 安装 Uptime Kuma，展示服务状态    | 第4天    |
| 5    | 接入 Sentry、基础性能分析工具     | 第5\~6天 |
| 6    | 安全防护优化（限流、压缩、防护）  | 第6\~7天 |
| 7    | 学习 Docker，并尝试用容器部署服务 | 后续拓展 |



## 阶段1：nginx 简单部署

主播选择的镜像是`veLinux 2.0 CentOS兼容版 64 bit`，这里就用官方提供的`ECS Terminal`连接服务器吧，大家也可以选择本地SSH客户端（PuTTY、Xshell、Terminal.app等等）。

### 更新系统依赖

这一步就是将系统中所有已安装的软件包更新到最新的可用版本

```shell
sudo dnf update -y
```

veLinux 2.0 是基于 CentOS 8+，使用的是 `dnf` 包管理器。sudo是 "superuser do"（超级用户执行）的缩写。它允许普通用户以系统管理员（通常是root用户）的权限来执行一个命令。

![](https://cdn.jsdelivr.net/gh/pengpen1/blog-images/20250509132749716.png)



### 安装 Nginx

```shell
sudo dnf install -y nginx
```



### 启动Nginx 并设置开机启动

```shell
sudo systemctl start nginx
sudo systemctl enable nginx
```



### 检查是否运行成功

```
sudo systemctl status nginx
```

然后在浏览器中访问你服务器的公网 IP，比如：

```
http://公网IP
```

出现 **Welcome to nginx!** 字样说明成功



### 配置前端项目文件目录

 创建项目根目录

```
sudo mkdir -p /var/www/blog
sudo mkdir -p /var/www/lab
```

上传构建后的前端项目到服务器指定目录

方式一：使用 `scp` 从本地上传（假设在本地构建完成了）

```
scp -r ./dist/ root@你的服务器IP:/var/www/blog
```

方式二：用 `git` 拉取代码后在服务器上构建

```
bash复制编辑sudo dnf install -y git
cd /var/www
sudo git clone https://github.com/...地址 blog
cd blog
```



### 配置 Nginx 路由访问

```
sudo vi /etc/nginx/conf.d/default.conf
```

<blockquote>如果没有 conf.d/default.conf，你也可以编辑主配置 /etc/nginx/nginx.conf 的 server 块部分</blockquote>

修改为如下内容：

```nginx
server {
    listen 80;
    server_name your-domain.com; # 若无域名，可填 _ 或服务器IP

    # 博客
    location /blog/ {
        root /var/www;
        index index.html;
        try_files $uri $uri/ /blog/index.html;
    }

    # CSS练习平台
    location /lab/ {
        root /var/www;
        index index.html;
        try_files $uri $uri/ /lab/index.html;
    }
}
```



### 重新加载 Nginx 配置

```shell
sudo nginx -t  # 测试配置是否有误
sudo systemctl reload nginx
```



### 测试访问

- 浏览器打开：`http://服务器IP/blog/` → 访问博客
- 浏览器打开：`http://服务器IP/lab/` → 访问练习平台
