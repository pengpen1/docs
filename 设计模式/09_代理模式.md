# 09_结构型：代理模式 (Proxy)

代理模式为其他对象提供一种代理以控制对这个对象的访问。

**核心思想：**

*   引入一个代理对象，客户端通过代理对象间接访问真实对象。
*   代理对象和真实对象通常实现相同的接口。
*   代理对象可以在访问真实对象前后执行额外的操作，如权限控制、延迟加载、日志记录等。

**类型：**

*   **远程代理 (Remote Proxy):** 为一个位于不同地址空间的对象提供一个本地的代理。
*   **虚拟代理 (Virtual Proxy):** 根据需要创建开销很大的对象。例如，延迟加载图片。
*   **保护代理 (Protection Proxy):** 控制对原始对象的访问。用于对象应该有不同访问权限的时候。
*   **智能引用 (Smart Reference):** 取代了简单的指针，它在访问对象时执行一些附加操作，如计算访问次数。

**应用场景：**

*   需要控制对对象的访问时。
*   需要为对象添加额外的间接层以实现某种功能时（如懒加载、日志、权限控制）。

**结构：**

*   Subject（抽象主题）：定义真实主题和代理的共同接口。
*   RealSubject（真实主题）：定义代理所代表的真实实体。
*   Proxy（代理）：保存一个引用使得代理可以访问实体，并提供一个与 Subject 的接口相同的接口，这样代理就可以用来替代实体。
