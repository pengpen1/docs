# 23_行为型：访问者模式 (Visitor)

访问者模式表示一个作用于某对象结构中的各元素的操作。它使你可以在不改变各元素的类的前提下定义作用于这些元素的新操作。

**核心思想：**

*   将数据结构（Element）和作用于结构上的操作（Visitor）分离。
*   Element 提供一个 `accept` 方法，接收一个 Visitor 对象作为参数。
*   Visitor 定义一系列 `visit` 方法，每个方法对应一个具体的 Element 类型。
*   在 `accept` 方法中，Element 调用 Visitor 的相应 `visit` 方法，并将自身（`this`）作为参数传递。
*   通过增加新的 Visitor，可以为对象结构添加新的操作，而无需修改 Element 类。

**应用场景：**

*   一个对象结构包含很多类对象，它们有不同的接口，而你想对这些对象实施一些依赖于其具体类的操作。
*   需要对一个对象结构中的对象进行很多不同的并且不相关的操作，而你想避免让这些操作“污染”这些对象的类。Visitor 使得你可以将相关的操作集中起来定义在一个类中。
*   当该对象结构被很多应用共享时，用 Visitor 模式让每个应用仅包含需要用到的操作。
*   定义对象结构的类很少改变，但经常需要在此结构上定义新的操作。

**结构：**

*   Visitor（抽象访问者）：为该对象结构中 ConcreteElement 的每一个类声明一个 Visit 操作。
*   ConcreteVisitor（具体访问者）：实现每个由 Visitor 声明的操作。
*   Element（抽象元素）：定义一个 Accept 操作，它以一个访问者为参数。
*   ConcreteElement（具体元素）：实现 Accept 操作。
*   ObjectStructure（对象结构）：能枚举它的元素；可以提供一个高层的接口以允许该访问者访问它的元素；可以是一个复合或是一个集合。
